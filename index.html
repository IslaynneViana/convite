<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Feijoada entre Amigos</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="folha2"></div>

  <!-- ===== FOLHAS DECORATIVAS ===== -->
  <img src="img/folhas.svg" class="folha folha-top-left" alt="">
  <img src="img/folhas.svg" class="folha folha-top-right" alt="">
  <img src="img/folhas.svg" class="folha folha-esq1" alt="">
  <img src="img/folhas.svg" class="folha folha-dir1" alt="">
  <img src="img/folhas.svg" class="folha folha-bottom-left" alt="">
  <img src="img/folhas.svg" class="folha folha-bottom-right" alt="">

  <!-- IMAGEM DE FUNDO DE DESTAQUE -->
  <img src="img/forma_geometrica.png" alt="" class="fundo-destaque">

  <!-- SELO -->
  <div class="selo">
    <img src="img/cerveja.png" class="cerveja-esq" alt="Cerveja">

    <svg viewBox="0 0 300 300">
      <defs>
        <path id="circulo-cima" d="M 150,150 m -120,0 a 120,120 0 0,1 240,0"/>
        <path id="circulo-baixo" d="M 150,150 m -120,0 a 120,120 0 0,0 240,0"/>
        <clipPath id="foto-redonda">
          <circle cx="150" cy="150" r="65" />
        </clipPath>
      </defs>

      <text class="texto-cima">
        <textPath href="#circulo-cima" startOffset="50%" text-anchor="middle">
          Feijoada entre amigos
        </textPath>
      </text>

      <text class="texto-baixo">
        <textPath href="#circulo-baixo" startOffset="50%" text-anchor="middle">
          22 anos do Abias
        </textPath>
      </text>

      <image href="img/foto.png" x="85" y="85" width="130" height="130" clip-path="url(#foto-redonda)" />
    </svg>

    <img src="img/cerveja.png" class="cerveja-dir" alt="Cerveja">
  </div>

  <!-- ===== COUNTDOWN ===== -->
  <section class="countdown-section">
    <h2 class="section-title">Contagem <span>Regressiva</span></h2>

    <div class="countdown-container">
      <div class="count-box"><span id="days">00</span> dias</div>
      <div class="count-box"><span id="hours">00</span> horas</div>
      <div class="count-box"><span id="minutes">00</span> min</div>
      <div class="count-box"><span id="seconds">00</span> seg</div>
    </div>

    <div class="datetime-wrapper">
      <div class="date-box">
        <h3>DATA</h3>
        <p>09 de janeiro de 2026</p>
      </div>
      <div class="date-box">
        <h3>HORA</h3>
        <p>20:00H</p>
      </div>
    </div>
  </section>

  <!-- ===== PRESEN√áA ===== -->
  <section class="presence-section">
    <h2 class="section-title">Confirme sua <span>Presen√ßa</span></h2>

    <div class="nome-input-wrapper">
      <input type="text" id="nomeConvidado" class="nome-input" placeholder="Digite seu nome completo"/>
      <p class="aviso" id="aviso">Por favor, digite seu nome antes de confirmar!</p>
    </div>

    <div class="presence-buttons">
      <button class="btn yes" onclick="confirmarPresenca(true)">Vou</button>
      <button class="btn no" onclick="confirmarPresenca(false)">N√£o vou</button>
    </div>

    <p class="deadline">Confirma√ß√£o at√© dia 05/01</p>
  </section>

  <!-- ===== LOCAL ===== -->
  <section class="local-section">
    <h2 class="section-title">Local</h2>

    <p class="address">
      R. Parnar√≠ba, SN ‚Äì Ponta do Farol, S√£o Lu√≠s ‚Äì MA
    </p>

    <div class="map-box">
      <div class="map-container">
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6352.764447270472!2d-44.2917404!3d-2.4909685!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7f68c49a22e75b5%3A0x608fb79eee1a79!2sVivendas%20Ponta%20do%20Farol!5e1!3m2!1spt-BR!2sbr!4v1764935699305!5m2!1spt-BR!2sbr"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </section>

  <!-- ===== CARD√ÅPIO ===== -->
  <section class="cardapio-section">
    <h2 class="section-title">Card√°pio</h2>

    <div class="cardapio-box">
      <p>Feijoada<br>Salgadinhos<br>Bolo<br></p>
    </div>
  </section>

  <!-- ===== ATRA√á√ïES ===== -->
  <section class="atracoes-section">
    <h2 class="section-title">Atra√ß√µes</h2>
    <p class="nome-banda">Banda do Raf√£o</p>

    <div class="atra-box">
      <img src="img/artista.png" class="atra-img" alt="Artista" />

      <p class="atra-desc">
        Quer colaborar com nossa playlist?<br>
        Dispon√≠vel no Spotify!
      </p>

      <a href="https://open.spotify.com/playlist/0CqH6dppbVbFcnmyiMzpOr"
         target="_blank"
         class="spotify-btn">
        <img src="img/spotify.png" alt="Spotify" class="spotify-icon">
      </a>
    </div>
  </section>

  <!-- ===== INFO ADICIONAL ===== -->
  <section class="info-section">
    <h2 class="section-title">Informa√ß√µes Adicionais</h2>

    <div class="info-grid">

      <div class="info-box1">
        <h3>Lista de Presentes</h3>
        <p>
          Sem lista!<br>
          Aqui vale o que voc√™ achar a minha cara.<br>
          Qualquer presente escolhido com carinho j√° me deixa feliz.
          Para quem quiser dar roupas,
          deixei minhas medidas logo abaixo.
          O resto, deixo totalmente ao seu gosto.
        </p>
      </div>

      <div class="info-medidas">
        <p>
          Cabe√ßa: 60 a 62<br>
          Camisa: GG/XG<br>
          Cal√ßa/Bermuda: 46/48<br>
          Cal√ßado: 43/44
        </p>
      </div>

      <div class="info-box2">
        <h3>Dress Code</h3>
        <p>
          Casual confort√°vel:<br>
          O clima √© de barzinho, ent√£o venha no seu estilo!
        </p>
      </div>

    </div>
  </section>

  <!-- Bot√£o WhatsApp -->
  <a href="#" onclick="abrirWpp()" class="wpp-circle-btn">
    <img src="img/whatsapp.png" alt="WhatsApp">
  </a>

  <div id="wpp-popup" class="wpp-popup"></div>

  <!-- ===== SCRIPTS ===== -->
  <script>
    // Countdown
    const targetDate = new Date('2026-01-09T21:00:00').getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDate - now;

      const values = ['days','hours','minutes','seconds'];
      if (distance < 0) {
        values.forEach(id => document.getElementById(id).textContent = '00');
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((distance / (1000 * 60)) % 60);
      const seconds = Math.floor((distance / 1000) % 60);

      document.getElementById('days').textContent = String(days).padStart(2,'0');
      document.getElementById('hours').textContent = String(hours).padStart(2,'0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2,'0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2,'0');
    }
    
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // Confirma√ß√£o de presen√ßa
// IMPORTANTE: Substitua pela URL do seu Google Apps Script
const SCRIPT_URL = 'https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLjosJrCi1cWeSLFMrBaK3OCImM0vjN03Ple0LBLdzdz6-4u9e668Cup8HA8Emm_x1gklCU6CR-_LVD0x-3beRQlFj7Cy9dc_CRfMYTBS_mrvc89fEmt97K5gTqkmK6JsJksObrDh0TMXd118fnDqriOL12d8HXlrWiNfrhiI_0MaA7xPk8rtsqq29aGMvOZYJHkCFKzx4AkTZmsKpV_fvZ8K4t8-Y-84r98yoqG-3fgKm0uKw_vT1t38dfA8pEiv1tnYSKppqXL3PdFPJK5Mt8l8J3qOM89mUiri0pk&lib=M0b5EkyeuO7p0SNMAL4EKUa7wk99we36t';

// IMPORTANTE: N√∫mero do WhatsApp (com DDI e DDD)
const WHATSAPP_NUMBER = '559884644441';

// Fun√ß√£o de confirma√ß√£o de presen√ßa
async function confirmarPresenca(vaiComparece) {
  const nomeInput = document.getElementById('nomeConvidado');
  const aviso = document.getElementById('aviso');
  const nome = nomeInput.value.trim();

  console.log('=== INICIANDO CONFIRMA√á√ÉO ===');
  console.log('Nome digitado:', nome);
  console.log('Vai comparecer:', vaiComparece);

  // Valida se o nome foi preenchido
  if (!nome) {
    aviso.style.display = 'block';
    nomeInput.focus();
    console.log('Nome vazio - abortando');
    return;
  }

  // Esconde o aviso se estava vis√≠vel
  aviso.style.display = 'none';

  // Define a confirma√ß√£o
  const confirmacao = vaiComparece ? 'Vou comparecer' : 'N√£o vou comparecer';
  const dataHora = new Date().toLocaleString('pt-BR');

  const dadosParaEnviar = {
    nome: nome,
    confirmacao: confirmacao,
    dataHora: dataHora
  };

  console.log('Dados para enviar:', dadosParaEnviar);
  console.log('URL do script:', SCRIPT_URL);

  // Prepara mensagem para WhatsApp
  const mensagem = vaiComparece
    ? `Ol√°! Confirmei minha presen√ßa na festa. Meu nome √© ${nome} üéâ`
    : `Ol√°! Infelizmente n√£o poderei comparecer √† festa. Meu nome √© ${nome}`;

  const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(mensagem)}`;

  try {
    console.log('Enviando para Google Sheets...');

    // Envia para o Google Sheets
    const response = await fetch(SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(dadosParaEnviar)
    });

    console.log('Resposta recebida:', response);
    console.log('Status:', response.status);

    // Aguarda 1 segundo para garantir o envio
    await new Promise(resolve => setTimeout(resolve, 1000));

    console.log('Aguardou 1 segundo - redirecionando...');
  } catch (error) {
    console.error('ERRO ao enviar para planilha:', error);
  }

  // Redireciona para o WhatsApp
  console.log('Redirecionando para WhatsApp:', whatsappURL);
  window.location.href = whatsappURL;
}





    // Popup WhatsApp
    function abrirWpp() {
      const popup = document.getElementById("wpp-popup");

      popup.classList.add("show");

      setTimeout(() => {
        window.open(
          "https://wa.me/5598988771485?text=Ol√°!%20Quero%20um%20convite%20igual!",
          "_blank"
        );
      }, 600);

      setTimeout(() => popup.classList.remove("show"), 2000);
    }
  </script>

</body>
</html>
